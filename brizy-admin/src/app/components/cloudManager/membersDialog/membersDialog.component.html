
<span mat-dialog-title>
    <h2>
        Team Members
    </h2>
    <span class="info">
        There are {{teamMembers.length}} people collaborating in this account
    </span>
</span>
<mat-dialog-content class="mat-typography">

    <div class="members-list">
        <div *ngIf="loadingTeamMembers" class="cloud-loader">
            <mat-spinner></mat-spinner>
        </div>
        <div class="member" *ngFor="let member of teamMembers ">
            <div class="email">
                {{member.email}}
            </div>
            <div class="type">
                <mat-form-field  appearance="outline">
                    <mat-label>Role</mat-label>
                    <mat-select  (selectionChange)="changeRole(member)" [(value)]="member.role">
                        <mat-option *ngFor="let role of roles" [value]="role.value">{{role.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="status">
                {{member.status}}
            </div>
            <div class="actions">
                <button *ngIf="!member.owner" (click)="deleteMember(member)" mat-raised-button color="warn">
                    <mat-icon>delete</mat-icon>
                    <span>Delete</span>
                </button>
            </div>
        </div>
    </div>
    <div class="member-invite">
        <mat-form-field  class="email-field" appearance="outline">
            <mat-label>Email</mat-label>
            <input type="email" matInput [formControl]="emailFormControl"
                   placeholder="Ex. example@example.com">
            <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                Please enter a valid email address
            </mat-error>
            <mat-error *ngIf="emailFormControl.hasError('required')">
              Email is <strong>required</strong>
            </mat-error>
        </mat-form-field>

        <mat-form-field  class="role-field" appearance="outline">
            <mat-label>Role</mat-label>
            <mat-select [formControl]="roleFormControl">
                <mat-option *ngFor="let role of roles" [value]="role.value">{{role.name}}</mat-option>
            </mat-select>
        </mat-form-field>

        <button mat-raised-button color="primary" [disabled]="loadingTeamMembers" (click)="inviteMember()">Send invitation</button>
    </div>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancel</button>
</mat-dialog-actions>
